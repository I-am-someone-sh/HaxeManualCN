<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">

    <title>Haxe 中文手册 |  </title>
    <meta name="description" content>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <!-- fonts -->
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet">

    <!-- stylesheets -->
    <link rel="stylesheet" href="/style/doc.css">

    <!-- favicon -->
    <link rel="icon" href="/images/favicon.ico">

    

  </head>
  <body>

   <script>window.__INITIAL_STATE__ = {"page":{"path":"6.语言特性/6.1.条件编译/6.1.条件编译.html","title":""},"data":{"navigation":{"logo":{"text":"Haxe 中文手册","type":"link","path":"index.html"},"main":[{"text":"目录","type":"label","children":null},{"text":"2.类型","type":"link","path":"2.类型/2.类型.html","children":[{"text":"2.1.基本类型","type":"link","path":"2.类型/2.1.基本类型/2.1.基本类型.html","children":[{"text":"2.1.1.数值类型","type":"link","path":"2.类型/2.1.基本类型/2.1.1.数值类型.html"},{"text":"2.1.2.溢出","type":"link","path":"2.类型/2.1.基本类型/2.1.2.溢出.html"}]},{"text":"2.2.为空性","type":"link","path":"2.类型/2.2.为空性/2.2.为空性.html"},{"text":"2.3.类实例","type":"link","path":"2.类型/2.3.类实例/2.3.类实例.html"},{"text":"2.4.枚举实例","type":"link","path":"2.类型/2.3.类实例/2.4.枚举实例.html"},{"text":"2.5.匿名结构","type":"link","path":"2.类型/2.5.匿名结构/2.5.匿名结构.html","children":[{"text":"2.5.1.结构值的JSON形式","type":"link","path":"2.类型/2.5.匿名结构/2.5.1.结构值的JSON形式.html"},{"text":"2.5.2.结构类型的类记法","type":"link","path":"2.类型/2.5.匿名结构/2.5.2.结构类型的类记法.html"},{"text":"2.5.3.可选字段","type":"link","path":"2.类型/2.5.匿名结构/2.5.3.可选字段.html"},{"text":"2.5.4.性能影响","type":"link","path":"2.类型/2.5.匿名结构/2.5.4.性能影响.html"},{"text":"2.5.5.扩展","type":"link","path":"2.类型/2.5.匿名结构/2.5.5.扩展.html"}]},{"text":"2.6.函数类型","type":"link","path":"2.类型/2.6.函数类型/2.6.函数类型.html"},{"text":"2.7.动态类型","type":"link","path":"2.类型/2.7.动态类型/2.7.动态类型.html"},{"text":"2.8.抽象类型","type":"link","path":"2.类型/2.8.抽象类型/2.8.抽象类型.html"},{"text":"2.9.单形","type":"link","path":"2.类型/2.9.单形/2.9.单形.html"}]},{"text":"3.类型系统","type":"link","path":"3.类型系统/3.类型系统.html","children":[{"text":"3.1.Typedef","type":"link","path":"3.类型系统/3.1.Typedef/3.1.Typedef.html"},{"text":"3.2.类型参数","type":"link","path":"3.类型系统/3.2.类型参数/3.2.类型参数.html"},{"text":"3.3.泛型","type":"link","path":"3.类型系统/3.3.泛型/3.3.泛型.html"},{"text":"3.4.变异","type":"link","path":"3.类型系统/3.4.变异/3.4.变异.html"},{"text":"3.5.一致性检查","type":"link","path":"3.类型系统/3.5.一致性检查/3.5.一致性检查.html","children":[{"text":"3.5.1.类与接口","type":"link","path":"3.类型系统/3.5.一致性检查/3.5.1.类与接口.html"},{"text":"3.5.2.结构子类型","type":"link","path":"3.类型系统/3.5.一致性检查/3.5.2.结构子类型.html"},{"text":"3.5.3.单形","type":"link","path":"3.类型系统/3.5.一致性检查/3.5.3.单形.html"},{"text":"3.5.4.函数返回","type":"link","path":"3.类型系统/3.5.一致性检查/3.5.4.函数返回.html"},{"text":"3.5.5.通用基本类型","type":"link","path":"3.类型系统/3.5.一致性检查/3.5.5.通用基本类型.html"}]},{"text":"3.6.类型推断","type":"link","path":"3.类型系统/3.6.类型推断/3.6.类型推断.html"},{"text":"3.7.模块和路径","type":"link","path":"3.类型系统/3.7.模块和路径/3.7.模块和路径.html"}]},{"text":"4.类字段","type":"link","path":"4.类字段/4.类字段.html"},{"text":"5.表达式","type":"link","path":"5.表达式/5.表达式.html"},{"text":"6.语言特性","type":"link","path":"6.语言特性/6.语言特性.html"},{"text":"7.编译器用法","type":"link","path":"7.编译器用法/7.编译器用法.html"},{"text":"8.编译器功能","type":"link","path":"8.编译器功能/8.编译器功能.html"},{"text":"9.宏","type":"link","path":"9.宏/9.宏.html"},{"text":"10.标准库","type":"link","path":"10.标准库/10.标准库.html"},{"text":"支持与反馈","type":"label","children":null},{"text":"Repository Link","type":"link","path":"https://github.com/NulllStack/HaxeManualCN"}]}},"config":{"timezone":"UTC","root":"/","time_format":"HH:mm:ss","theme":"../node_modules/hexo-theme-doc","theme_config":{"swagger_ui":{"version":2,"permalinks":true,"api_explorer":true,"download":"Download specification","show_extensions":false,"deep_linking":true,"display_operation_id":false,"doc_expansion":"none"},"search":{"skip":false,"background":false,"route":"/lunr.json"},"favicon":"images/favicon.ico"}}}</script>

    <div id="react-navigation-root"><div class="doc-navigation" data-reactroot><nav class="doc-navbar"><a href="/index.html" class="doc-navbar__logo"><img src="/images/logo.png" class="doc-navbar__logo__img"><span class="doc-navbar__logo__text">Haxe 中文手册</span></a><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close doc-navbar__sidebar-close--desktop"></i><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"></div><ul class="doc-sidebar-list"></ul></div></nav></div></div>
    <div class="doc-content">
  <div class="dc-page">
    <div class="dc-card">
      <div id="react-search-results-root"></div>
      <div id="page-content" class="doc-formatting">
        <h1 id="6-1-条件编译"><a href="#6-1-条件编译" class="headerlink" title="6.1.条件编译"></a>6.1.条件编译</h1><p>Haxe允许通过使用 #if 、#elseif 和 #else 进行条件编译，并检查编译器标记。</p>
<blockquote>
<p>Haxe allows conditional compilation by using #if, #elseif and #else and checking for compiler ﬂags.</p>
</blockquote>
<blockquote>
<p>定义：编译器标记<br>一个编译器标记是一个配置值，可以改变编译过程。可以调用命令行使用 -D key=value 或者 只有 -D key的形式对标记进行设置，只有key的时候值默认为 1 。编译器也设置了一些内部标记在不同的编译步骤之间传递信息。<br>[warning] <strong>Deﬁnition</strong>: Compiler Flag<br>A compiler ﬂag is a conﬁgurable value which may inﬂuence the compilation process. Such a ﬂag can be set by invoking the command line with -D key=value or just -D key, in which case the value defaults to “1”. The compiler also sets several ﬂags internally to pass information between different compilation steps.</p>
</blockquote>
<p>这个例子展示了条件编译的用法：</p>
<blockquote>
<p>This example demonstrates usage of conditional compilation:</p>
</blockquote>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span></span>()&#123;</span><br><span class="line">        <span class="meta">#<span class="meta-keyword">if</span> !debug</span></span><br><span class="line">            <span class="built_in">trace</span>(<span class="string">"ok"</span>); </span><br><span class="line">        <span class="meta">#<span class="meta-keyword">elseif</span> (debug_level &gt; 3) </span></span><br><span class="line">            <span class="built_in">trace</span>(<span class="number">3</span>); </span><br><span class="line">        <span class="meta">#<span class="meta-keyword">else</span> </span></span><br><span class="line">            <span class="built_in">trace</span>(<span class="string">"debug level too low"</span>);</span><br><span class="line">        <span class="meta">#<span class="meta-keyword">end</span> </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不使用任何标记编译只保留 trace(“ok”); 这行。另一个分支在解析文件时被丢弃。这些其他的分支必须包含有效的Haxe语法，但是代码不会执行类型检查。</p>
<blockquote>
<p>Compiling this without any ﬂags will leave only the trace(“ok”); line in the body of the main method. The other branches are discarded while parsing the ﬁle. These other branches must still contain valid Haxe syntax, but the code is not type-checked.</p>
</blockquote>
<p>#if 之后的条件和 #elseif之后的条件允许如下的表达式：</p>
<blockquote>
<p>The conditions after #if and #elseif allow the following expressions:</p>
</blockquote>
<ul>
<li>任何标识符被编译器标记替换为同名的。注意 -D -some-flag 指示标记 some-flag，somin_flag被定义。</li>
<li>String，Int和Float常量值被直接使用。</li>
<li>布尔操作符 &amp;&amp;， || ，和 ! 如同预期那样工作，然而整个表达式必须被完全放在括号中。</li>
<li>操作符 ==，!=，&gt;， &gt;=，&lt;，&lt;=可以用来对比值。</li>
<li>括号可以用来像往常一样组织表达式。</li>
</ul>
<blockquote>
<ul>
<li>Any identiﬁer is replaced by the value of the compiler ﬂag by the same name. Note that -D some-flag from command line leads to the ﬂags some-flag and some_flag to be deﬁned.</li>
<li>The values of String, Int and Float constants are used directly.</li>
<li>The boolean operators &amp;&amp; (and), || (or) and ! (not) work as expected, however the full expression must be completely contained by parentheses.</li>
<li>The operators ==, !=, &gt;, &gt;=, &lt;, &lt;= can be used to compare values.</li>
<li>Parentheses () can be used to group expressions as usual.</li>
</ul>
</blockquote>
<p>Haxe解析器不解析 some-flag为一个字符串令牌，而是将她读为一个减法二院操作符 some - flag 。这种情况，下划线的版本 some_flag 就有使用的必要了。</p>
<blockquote>
<p>The Haxe parser does not parse some-flag as a single token and instead reads it as a subtraction binary operator some - flag. In cases like this the underscore version some_flag has to be used.</p>
</blockquote>
<p><strong>内建编译器标记</strong> 一个所有内部定义的详尽列表可以通过在Haxe编译器 调用 –help-defines 参数来获得。Haxe编译器在每次编译允许多个 -D 标记。</p>
<blockquote>
<p><strong>Built-in Compiler Flags</strong> An exhaustive list of all built-in deﬁnes can be obtained by invoking the Haxe Compiler with the –help-defines argument. The Haxe Compiler allows multiple -D ﬂags per compilation.</p>
</blockquote>
<p>也可以查看编译器标记列表（第7.1节）。</p>
<blockquote>
<p>See also the Compiler Flags list (7.1).</p>
</blockquote>

        <div id="react-support-footer-root"></div>
      </div>
    </div>
  </div>
</div>

    


    

    <!-- js vendors -->
    <script src="//code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lunr.js/2.1.0/lunr.min.js"></script>

    <!-- js source  -->
    <script src="/script/doc.js"></script>

    

  </body>
</html>
